<!DOCTYPE html>
<html>
<head>
    <title>Tap State</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <style>
        #test {
            -webkit-tap-highlight-color: rgba(0,0,0,0);
            background-color: green;
        }

            #test.active {
                background-color: red;
            }
    </style>
</head>
<body style="text-align: center; font-family: Segoe UI Light,Segoe UI,Microsoft Jhenghei,Mirco Yahei,'sans-serif'; background-color: black; color: white;">
    <div id="test" style="width: 280px; height: 200px; margin: 0 auto; line-height: 200px; font-size: 30px;">Tap Me</div>
    <div id="result" style="font-size: 18px;"></div>
    <script src="../../alloy_finger.js"></script>
    <div>
        <script>

            var result = document.querySelector("#result"),
                testDiv = document.querySelector("#test"),
                html = "";

            new AlloyFinger(testDiv, {
                touchStart: function () {
                    html = "";
                    html += "start<br/>";
                    result.innerHTML = html;
                    addClass(testDiv, "active");
                },
                touchEnd: function () {
                    html += "end<br/>";
                    result.innerHTML = html;
                    removeClass(testDiv, "active");
                },
                tap: function () {
                    html += "tap<br/>";
                    result.innerHTML = html;
                }
            })


            function hasClass(ele, cls) {
                return !!ele.className.match(new RegExp('(\\s|^)' + cls + '(\\s|$)'));
            }

            function addClass(ele, cls) {
                if (!hasClass(ele, cls)) ele.className += " " + cls;
            }

            function removeClass(ele, cls) {
                if (hasClass(ele, cls)) {
                    var reg = new RegExp('(\\s|^)' + cls + '(\\s|$)');
                    ele.className = ele.className.replace(reg, ' ');
                }
            }
        </script>
    </div>
</body>
</html>
